<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalhes da Peça</title>
  <link rel="stylesheet" href="detalhes.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>

<body>
  <header class="topbar">
    <!--Colocar o titulo no centro-->
    <img src="imgs/titulogrwm.png" alt="Título GRWM" class="titulo">
  </header>

  <!-- Botão de voltar -->
  <a href="inicio.html" id="back-btn">
    <i class="fa-solid fa-arrow-left"></i>
  </a>

  <div class="container">
    <div class="image-section">
      <img src="imgs/blusa01.jpg" alt="Blusa" width="">
    </div>
    <div class="details-section">

      <!--Possui botão compartilhar-->
      <div class="titulo-compartilhar"><h1 id="titulo-peca">Blusa Decotada</h1>
        <div class="botao-compartilhar">
        <button id="compartilhar"><i class="fa fa-share-alt" aria-hidden="true"></i></button>
        </div>
      </div>

      <p>Cor da peça: <span id="cor">Colorido</spam></p>
      <p>Tipo: <span id="tipo">Blusa</span></p>
      <p>Ocasião: <span id="ocasiao">Casual</span></p>
      <p>Tamanho:<span id="tamanho"> P</span></p>
      <!--<p>Marca:<span id="marca"></span></p>-->
      <p>Descrição:<span> Blusinha refrescante para o verão, linda e muito colorida!</span></p>
      <br>
      <br>
      <div class="button">
        <button id="botao-adquirir">Adquirir</button>
      </div>
      

      <br>

      <!--<div class="comentario-box">
                Faça um comentário...
            </div>

            <div class="comentario-box">
                <p><strong>Ane</strong></p>
                Amei!
            </div>

            <div class="comentario-box">
                <p><strong>Camila</strong></p>
                Arrasou
            </div>

            <div class="comentario-box">
                <p><strong>Maria Clara</strong></p>
                Vou comprar uma igual!
            </div>

            <div class="comentario-box">
                <p><strong>Mariana</strong></p>
                Lindaa
            </div>-->


    </div>
  </div>

  <script>
    async function loadDetails() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");
      if (!id) return;

      try {
        const res = await fetch(`/item?id=${id}`);
        if (!res.ok) throw new Error("Peça não encontrada");

        const item = await res.json();

        document.querySelector('.image-section img').src = item.fotoBase64
          ? `data:image/*;base64,${item.fotoBase64}`
          : "imgs/imagem-padrao.png";
        document.querySelector('.details-section h1').textContent = item.nome;
        document.querySelector('.details-section p:nth-of-type(1) span').textContent = item.cor;
        document.querySelector('.details-section p:nth-of-type(2) span').textContent = item.categoria;
        document.querySelector('.details-section p:nth-of-type(3) span').textContent = item.ocasiao;
        document.querySelector('.details-section p:nth-of-type(4) span').textContent = item.tamanho || "Não definido";
      } catch (error) {
        console.error(error);
      }
    }

    window.onload = loadDetails;


  </script>

  <script src="detalhesDoacao.js"></script>

</body>

</html>